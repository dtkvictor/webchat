(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226c80"],{e9b8:function(e,t,s){"use strict";s.r(t);var n=s("7a23");const c={class:"container-fluid h-100"},a={class:"row h-100"},r={class:"friends d-lg-block col-3 border-end p-0",id:"side-bar"},i={class:"col-12 col-lg-9 chat"},o={key:0,class:"chat-container"},l={key:1,class:"h-100 w-100 d-flex justify-content-center align-items-center"},d=Object(n["h"])("div",{class:"alert bg-light d-none d-lg-block"}," Selecione um amigo para começar a conversar ",-1),u=[d];function b(e,t,s,d,b,h){const j=Object(n["y"])("friends-list"),O=Object(n["y"])("chat-header"),m=Object(n["y"])("chat-body"),p=Object(n["y"])("chat-footer"),f=Object(n["y"])("settings"),g=Object(n["y"])("no-users-online");return Object(n["s"])(),Object(n["g"])("div",c,[Object(n["h"])("div",a,[Object(n["i"])(n["b"],{name:"mobile-friends"},{default:Object(n["G"])(()=>[Object(n["H"])(Object(n["h"])("aside",r,[Object(n["i"])(j,{onClickConfigButton:t[0]||(t[0]=t=>e.openSettings=!0)})],512),[[n["E"],!e.currentChat]])]),_:1}),Object(n["h"])("div",i,[e.currentChat?(Object(n["s"])(),Object(n["g"])("div",o,[Object(n["i"])(O,null,{showListUsers:Object(n["G"])(()=>[Object(n["h"])("button",{class:"btn material-icons btn-outline-dark friendsMenu",onClick:t[1]||(t[1]=(...t)=>e.resetCurrentChat&&e.resetCurrentChat(...t))}," groups ")]),_:1}),Object(n["i"])(m),Object(n["i"])(p)])):(Object(n["s"])(),Object(n["g"])("div",l,u))])]),Object(n["i"])(f,{open:e.openSettings,onClose:t[2]||(t[2]=t=>e.openSettings=!1)},null,8,["open"]),Object(n["i"])(g)])}s("33d1"),s("ea98");const h={class:"h-100"},j={class:"row align-items-center ps-2 m-0 card-friend pe-2"},O={class:"input-group"},m=Object(n["h"])("span",{class:"input-group-text material-icons",translate:"no"},"search",-1),p=["onClick"],f=["src"],g={style:{width:"calc(100% - 4.5rem)"}},v={class:"d-flex justify-content-between"},w={class:"p-0 m-0 text-truncate"},y={class:"fw-light ms-1"},M={class:"d-flex justify-content-between"},k=["innerHTML"],x={key:0,class:"ms-1 bg-light shadow-sm rounded-circle notification"};function C(e,t,s,c,a,r){return Object(n["s"])(),Object(n["g"])("div",h,[Object(n["h"])("header",j,[Object(n["h"])("div",O,[Object(n["h"])("button",{class:"input-group-text rounded-0 material-icons",translate:"no",onClick:t[0]||(t[0]=t=>e.$emit("clickConfigButton"))},"menu"),Object(n["h"])("input",{type:"text",class:"form-control",placeholder:"Buscar",onKeyup:t[1]||(t[1]=e=>r.search(e))},null,32),m])]),(Object(n["s"])(!0),Object(n["g"])(n["a"],null,Object(n["w"])(r.friendsList,(t,s)=>{var c;return Object(n["s"])(),Object(n["g"])("div",{key:s,class:"row align-items-center ps-2 m-0 card-friend",onClick:s=>e.setCurrentChat(t)},[Object(n["h"])("img",{src:t.image},null,8,f),Object(n["h"])("div",g,[Object(n["h"])("div",v,[Object(n["h"])("p",w,Object(n["B"])(t.name),1),Object(n["h"])("small",y,Object(n["B"])(null===(c=t.messages.at(-1))||void 0===c?void 0:c.hour),1)]),Object(n["h"])("div",M,[Object(n["h"])("small",{class:"fw-lighter text-truncate p-0 m-0 d-flex",innerHTML:r.lastMessage(t.messages)},null,8,k),t.unreadMessage>0?(Object(n["s"])(),Object(n["g"])("small",x,Object(n["B"])(t.unreadMessage),1)):Object(n["f"])("",!0)])])],8,p)}),128))])}var B=s("5502"),E={data:()=>({searchResult:null}),methods:{...Object(B["c"])(["setCurrentChat"]),...Object(B["d"])(["helpers"]),lastMessage(e){if(!e.at(-1))return;const t=e.at(-1);return this.helpers().notificationByFormat(t.format,t.value)},search(e){const t=e.target.value,s=new RegExp(t.toLowerCase(),"i"),n=[],c=Object.keys(this.users);c.forEach(e=>{s.test(this.users[e].name.toLowerCase())&&n.push(this.users[e])}),this.searchResult=n}},computed:{...Object(B["d"])(["users"]),friendsList(){return this.searchResult?this.searchResult:this.users}}},L=s("6b0d"),U=s.n(L);const $=U()(E,[["render",C]]);var T=$;const F={class:"row align-items-center border-bottom chat-header"},H=["src"],R={class:"col-8"},N={class:"p-0 me-1 m-0 text-truncate"};function S(e,t,s,c,a,r){var i,o;return Object(n["s"])(),Object(n["g"])("div",F,[e.currentChat?(Object(n["s"])(),Object(n["g"])("img",{key:0,src:null===(i=e.currentChat)||void 0===i?void 0:i.image},null,8,H)):Object(n["f"])("",!0),Object(n["h"])("div",R,[Object(n["h"])("p",N,Object(n["B"])(null===(o=e.currentChat)||void 0===o?void 0:o.name),1)]),Object(n["x"])(e.$slots,"showListUsers")])}var _={computed:{...Object(B["d"])(["currentChat"])}};const D=U()(_,[["render",S]]);var G=D;const z={class:"row chat-body"},P={key:0,class:"list-message"},V=["onClick"],q=["innerHTML"],I={class:"text-end fw-lighter m-0 p-0 message-hour"},K={class:"d-flex justify-content-center p-4 pt-0"},J={class:"preview w-100 p-3"},A=["value","disabled"],Q=["innerHTML"],W={class:"d-flex justify-content-end gap-1 mt-2"};function X(e,t,s,c,a,r){const i=Object(n["y"])("modal"),o=Object(n["z"])("scrollTo");return Object(n["s"])(),Object(n["g"])("div",z,[e.currentChat?Object(n["H"])((Object(n["s"])(),Object(n["g"])("ul",P,[(Object(n["s"])(!0),Object(n["g"])(n["a"],null,Object(n["w"])(e.currentChat.messages,(e,t)=>(Object(n["s"])(),Object(n["g"])("li",{class:"mb-last-child-off",key:t},[Object(n["h"])("div",{class:Object(n["o"])(["message-container gap-1",{"justify-content-end":r.sending(e.from)}])},[Object(n["h"])("div",{class:Object(n["o"])(["d-flex gap-1 message-body text-wrap text-break lh-sm",{from:r.sending(e.from)}]),onClick:t=>r.setCurrentMessage(e)},[Object(n["h"])("div",{innerHTML:e.value},null,8,q),Object(n["h"])("div",I,Object(n["B"])(e.hour),1)],10,V)],2)]))),128))])),[[o]]):Object(n["f"])("",!0),Object(n["i"])(i,{open:r.openModalMessage,onClose:t[3]||(t[3]=e=>r.closeModalMessage())},{body:Object(n["G"])(()=>{var s;return[Object(n["h"])("div",K,[Object(n["h"])("div",J,["text"==e.currentMessage.format?(Object(n["s"])(),Object(n["g"])("textarea",{key:0,class:"form-control",value:e.currentMessage.value,ref:"inputEditMessage",onKeypress:t[0]||(t[0]=t=>r.editPressEnter(t,e.currentMessage)),disabled:!r.sending(e.currentMessage.from)},"                    \n                            ",40,A)):(Object(n["s"])(),Object(n["g"])("div",{key:1,innerHTML:null===(s=e.currentMessage)||void 0===s?void 0:s.value},null,8,Q)),Object(n["h"])("div",W,["text"===e.currentMessage.format&&r.sending(e.currentMessage.from)?(Object(n["s"])(),Object(n["g"])("button",{key:0,class:"btn btn-outline-warning material-icons",translate:"no",onClick:t[1]||(t[1]=t=>r.edit(e.currentMessage))}," edit ")):Object(n["f"])("",!0),Object(n["h"])("button",{class:"btn btn-outline-danger material-icons",translate:"no",onClick:t[2]||(t[2]=t=>{e.deleteMessage({from:e.currentMessage.from,messageId:e.currentMessage.id}),r.closeModalMessage()})}," delete ")])])])]}),_:1},8,["open"])])}const Y={class:"absolute-background"},Z={class:"bg-light rounded col-10 col-lg-6"},ee=Object(n["h"])("span",{class:"material-icons pointer"},"close",-1),te=[ee];function se(e,t,s,c,a,r){return Object(n["s"])(),Object(n["e"])(n["b"],{name:"fade"},{default:Object(n["G"])(()=>[Object(n["H"])(Object(n["h"])("div",Y,[Object(n["h"])("div",Z,[Object(n["h"])("div",{class:"w-100 d-flex justify-content-end p-1 pb-0",onClick:t[0]||(t[0]=e=>this.$emit("close"))},te),Object(n["x"])(e.$slots,"body")])],512),[[n["E"],s.open]])]),_:3})}var ne={props:{open:{required:!0,type:Boolean}}};const ce=U()(ne,[["render",se]]);var ae=ce,re={components:{Modal:ae},data:()=>({currentMessage:{}}),computed:{...Object(B["d"])(["currentChat","id"]),openModalMessage(){return!!this.currentMessage.status}},methods:{...Object(B["d"])(["helpers"]),...Object(B["b"])(["editMessage","deleteMessage"]),sending(e){return e===this.id},editPressEnter(e,t){this.$store.state.sendByEnter&&"Enter"===e.key&&(this.edit(t),e.preventDefault())},edit(e){const t=this.$refs.inputEditMessage.value,s=e.id;if(!this.sending(e.from))return this.$refs.inputEditMessage.value=e.value,!1;t&&s&&this.currentMessage.status&&this.editMessage({id:s,value:t}),this.closeModalMessage()},setCurrentMessage(e){var t;(null===(t=this.currentMessage)||void 0===t?void 0:t.id)!==e.id?(this.currentMessage=e,this.currentMessage.status=!0):this.currentMessage={}},closeModalMessage(){this.currentMessage.status=!1}}};const ie=U()(re,[["render",X]]);var oe=ie;const le={class:"form-floating w-100"},de={class:"h-100 p-3 form-control border-end-0 rounded-0 rounded-start hidden",id:"floatingTextarea",ref:"message"},ue={class:"btn border bg-white d-flex align-items-center rounded-0 border-start-0 border-end-0"},be=Object(n["h"])("label",{for:"inputFile",class:"material-icons fs-1 pointer",translate:"no"},"attach_file",-1),he=Object(n["h"])("span",{class:"material-icons fs-1",translate:"no"},"send",-1),je=[he],Oe={class:"btn btn-outline-dark d-flex"},me=Object(n["h"])("span",{class:"material-icons",translate:"no"},"send",-1),pe=[me];function fe(e,t,s,c,a,r){const i=Object(n["y"])("input-component"),o=Object(n["y"])("preview");return Object(n["s"])(),Object(n["g"])("div",{class:"d-flex justify-content-center chat-footer",onKeypress:t[6]||(t[6]=e=>r.sendMessageByEnter(e))},[Object(n["h"])("div",le,[Object(n["h"])("textarea",de,"\n            ",512)]),Object(n["h"])("div",ue,[be,Object(n["i"])(i,{class:"d-none",id:"inputFile",type:"file",accept:"image/*, audio/*, video/*",onValue:t[0]||(t[0]=e=>r.selectFile(e)),onError:t[1]||(t[1]=t=>e.error.file=t)})]),Object(n["h"])("button",{class:"btn border bg-white d-flex align-items-center rounded-0 border-start-0 rounded-end",onClick:t[2]||(t[2]=(...e)=>r.sendText&&r.sendText(...e)),id:"btnSend"},je),Object(n["i"])(o,{preview:e.preview,onClose:t[5]||(t[5]=t=>e.preview.status=!1)},{footer:Object(n["G"])(()=>[Object(n["h"])("button",Oe,[Object(n["h"])("span",{class:"material-icons",translate:"no",onClick:t[3]||(t[3]=t=>e.preview.status=!1)},"close")]),Object(n["h"])("button",{class:"btn btn-outline-dark d-flex",onClick:t[4]||(t[4]=(...e)=>r.sendFile&&r.sendFile(...e))},pe)]),_:1},8,["preview"])],32)}const ge={class:"preview p-3 pt-1"},ve=["innerHTML"],we={class:"mt-1 ms-1"},ye={class:"d-flex justify-content-end gap-2"};function Me(e,t,s,c,a,r){const i=Object(n["y"])("modal");return Object(n["s"])(),Object(n["e"])(i,{open:s.preview.status||!1,onClose:t[0]||(t[0]=e=>this.$emit("close"))},{body:Object(n["G"])(()=>{var t;return[Object(n["h"])("div",ge,[Object(n["h"])("div",{innerHTML:e.helpers().renderByFormat(s.preview.format,s.preview.url)},null,8,ve),Object(n["h"])("p",we,Object(n["B"])(null===(t=s.preview)||void 0===t?void 0:t.name),1),Object(n["h"])("div",ye,[Object(n["x"])(e.$slots,"footer")])])]}),_:3},8,["open"])}var ke={components:{Modal:ae},props:{preview:{required:!0,type:Object}},methods:{...Object(B["d"])(["helpers"])}};const xe=U()(ke,[["render",Me]]);var Ce=xe,Be={components:{Preview:Ce},data:()=>({preview:{},error:{}}),methods:{...Object(B["b"])(["sendMessage"]),selectFile(e){this.preview.status=!0,this.preview.name=e.name,this.preview.value=e,this.preview.url=window.URL.createObjectURL(e),this.preview.format=e.type.split("/")[0]},sendFile(){this.sendMessage({format:this.preview.format,value:this.preview.value,objectUrl:this.preview.url}),this.preview.status=!1},sendText(){if(!this.$refs.message.value)return!1;this.sendMessage({value:this.$refs.message.value}),this.$refs.message.value=""},sendMessageByEnter(e){this.$store.state.sendByEnter&&"Enter"===e.key&&(this.sendText(),e.preventDefault())}}};const Ee=U()(Be,[["render",fe]]);var Le=Ee;const Ue={class:"absolute-background justify-content-start col-md-12"},$e={class:"friends d-lg-block col-3 border-end p-0 w-mobile-100"},Te={class:"d-flex align-items-center justify-content-end m-0 card-friend"},Fe={class:"p-4"},He={class:"mb-3"},Re=["src"],Ne={class:"mb-3"},Se=Object(n["h"])("label",{class:"form-label",for:"profilePicture"},"Escolha uma foto:",-1),_e={class:"input-group"},De={key:0,class:"text-danger",role:"alert"},Ge={class:"input-group mb-3"},ze={class:"form-check form-switch mb-3"},Pe=Object(n["h"])("label",{class:"form-check-label ms-2",for:"sendByEnter"},"Enviar com Enter",-1),Ve={class:"form-check form-switch"},qe=Object(n["h"])("label",{class:"form-check-label ms-2",for:"showNotification"},"Exibir notificações",-1);function Ie(e,t,s,c,a,r){const i=Object(n["y"])("input-component");return Object(n["s"])(),Object(n["e"])(n["b"],{name:"fade"},{default:Object(n["G"])(()=>[Object(n["H"])(Object(n["h"])("section",Ue,[Object(n["h"])("aside",$e,[Object(n["h"])("header",Te,[Object(n["h"])("button",{class:"material-icons btn",translate:"no",onClick:t[0]||(t[0]=t=>{e.$emit("close"),r.closeSettings()})}," close ")]),Object(n["h"])("section",Fe,[Object(n["h"])("div",He,[Object(n["h"])("img",{class:"border border-dark rounded mx-auto d-block img-size",src:r.profile,alt:"profilePicture"},null,8,Re)]),Object(n["h"])("div",Ne,[Se,Object(n["h"])("div",_e,[Object(n["i"])(i,{self:!0,id:"profilePicture",type:"file",class:"form-control",accept:"image/*",onSelf:t[1]||(t[1]=t=>e.inputFile=t),onValue:t[2]||(t[2]=t=>e.file=t),onError:t[3]||(t[3]=t=>e.fileError=!0)}),Object(n["h"])("button",{class:"input-group-text btn-warning material-icons",onClick:t[4]||(t[4]=(...e)=>r.updateImage&&r.updateImage(...e))}," edit ")]),Object(n["i"])(n["b"],{name:"fade"},{default:Object(n["G"])(()=>[e.fileError?(Object(n["s"])(),Object(n["g"])("small",De," A imagem deve ter no máximo 10mb! ")):Object(n["f"])("",!0)]),_:1})]),Object(n["h"])("div",Ge,[Object(n["i"])(i,{id:"updateName",class:"form-control",type:"text",value:e.$store.state.name,maxLength:50,minLength:2,on:"blur",onValue:t[5]||(t[5]=t=>e.name=t),onBlur:t[6]||(t[6]=e=>r.setDefaultName(e))},null,8,["value"]),Object(n["h"])("button",{class:"input-group-text btn-warning material-icons",onClick:t[7]||(t[7]=(...e)=>r.updateName&&r.updateName(...e))}," edit ")]),Object(n["h"])("div",ze,[Object(n["H"])(Object(n["h"])("input",{class:"form-check-input px-4 py-2",type:"checkbox",id:"sendByEnter","onUpdate:modelValue":t[8]||(t[8]=t=>e.$store.state.sendByEnter=t)},null,512),[[n["D"],e.$store.state.sendByEnter]]),Pe]),Object(n["h"])("div",Ve,[Object(n["H"])(Object(n["h"])("input",{class:"form-check-input px-4 py-2",type:"checkbox",id:"showNotification","onUpdate:modelValue":t[9]||(t[9]=t=>e.$store.state.showNotification=t)},null,512),[[n["D"],e.$store.state.showNotification]]),qe])])])],512),[[n["E"],s.open]])]),_:1})}var Ke={props:{open:{required:!0,type:Boolean}},data:()=>({inputFile:null,file:null,urlBlob:null,name:null,fileError:!1}),computed:{profile(){return this.file?this.fileToUrlBlob(this.file):this.$store.state.image}},methods:{...Object(B["b"])(["updateDataUser"]),...Object(B["d"])(["iziToast"]),updateImage(){this.file&&(this.updateDataUser({field:"image",value:this.file,objectUrl:this.urlBlob}),this.iziToast().success({message:"Foto de perfil atualizada com sucesso!"}),this.file=null)},updateName(){this.name&&(this.updateDataUser({field:"name",value:this.name}),this.iziToast().success({message:"Nome de usuário atualizado com sucesso!"}),this.name=null)},setDefaultName(e){e.target.value||(e.target.value=this.$store.state.name)},fileToUrlBlob(e){return this.urlBlob&&window.URL.revokeObjectURL(this.urlBlob),this.urlBlob=window.URL.createObjectURL(e),this.urlBlob},closeSettings(){this.urlBlob&&window.URL.revokeObjectURL(this.urlBlob),this.name=null,this.file=null,this.inputFile.value=null}}};const Je=U()(Ke,[["render",Ie]]);var Ae=Je;const Qe=Object(n["h"])("div",{class:"row align-items-center p-4 m-0 card-friend"},[Object(n["h"])("h1",null,":("),Object(n["h"])("h2",null,"Poxa, parece que não tem ninguém online"),Object(n["h"])("h3",{class:"fw-light"},"Que tal chamar alguns amigos???")],-1);function We(e,t,s,c,a,r){const i=Object(n["y"])("modal");return Object(n["s"])(),Object(n["e"])(i,{open:r.openModal,onClose:t[0]||(t[0]=t=>e.close=!0)},{body:Object(n["G"])(()=>[Qe]),_:1},8,["open"])}var Xe={components:{Modal:ae},data:()=>({close:!1}),computed:{...Object(B["d"])(["amountUsers"]),openModal(){return this.amountUsers<1&&!this.close}}};const Ye=U()(Xe,[["render",We]]);var Ze=Ye,et={components:{ChatHeader:G,ChatBody:oe,ChatFooter:Le,FriendsList:T,Settings:Ae,NoUsersOnline:Ze},data:()=>({openSettings:!1}),computed:{...Object(B["d"])(["currentChat"])},methods:{...Object(B["c"])(["resetCurrentChat"])}};const tt=U()(et,[["render",b]]);t["default"]=tt}}]);
//# sourceMappingURL=chunk-2d226c80.966ae4bd.js.map