(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d226c80"],{e9b8:function(e,t,s){"use strict";s.r(t);var n=s("7a23");const c={class:"row h-100"},a={class:"friends d-lg-block col-3 border-end p-0",id:"side-bar"},r={class:"col-12 col-lg-9 chat"},i={key:0,class:"chat-container"},o={key:1,class:"h-100 w-100 d-flex justify-content-center align-items-center"},l=Object(n["h"])("div",{class:"alert bg-light"}," Selecione um amigo para começar a conversar ",-1),d=[l];function u(e,t,s,l,u,b){const h=Object(n["y"])("friends-list"),j=Object(n["y"])("chat-header"),O=Object(n["y"])("chat-body"),m=Object(n["y"])("chat-footer"),p=Object(n["y"])("settings"),g=Object(n["y"])("no-users-online");return Object(n["s"])(),Object(n["g"])("div",{class:"container-fluid h-100",onTouchstart:t[3]||(t[3]=t=>e.touchstart=t),onTouchend:t[4]||(t[4]=e=>b.showMobileSideBar(e))},[Object(n["h"])("div",c,[Object(n["i"])(n["b"],{name:"mobile-friends"},{default:Object(n["G"])(()=>[Object(n["H"])(Object(n["h"])("aside",a,[Object(n["i"])(h,{onClickConfigButton:t[0]||(t[0]=t=>e.openSettings=!0)})],512),[[n["E"],!e.currentChat]])]),_:1}),Object(n["h"])("div",r,[e.currentChat?(Object(n["s"])(),Object(n["g"])("div",i,[Object(n["i"])(j,null,{showListUsers:Object(n["G"])(()=>[Object(n["h"])("button",{class:"border-0 btn material-icons btn-outline-dark friendsMenu",onClick:t[1]||(t[1]=(...t)=>e.resetCurrentChat&&e.resetCurrentChat(...t))}," groups ")]),_:1}),Object(n["i"])(O),Object(n["i"])(m)])):(Object(n["s"])(),Object(n["g"])("div",o,d))])]),Object(n["i"])(p,{open:e.openSettings,onClose:t[2]||(t[2]=t=>e.openSettings=!1)},null,8,["open"]),Object(n["i"])(g)],32)}s("33d1"),s("ea98");const b={class:"h-100"},h={class:"row align-items-center ps-2 m-0 card-friend pe-2"},j={class:"input-group"},O=Object(n["h"])("span",{class:"input-group-text material-icons",translate:"no"},"search",-1),m=["onClick"],p=["src"],g={style:{width:"calc(100% - 4.5rem)"}},f={class:"d-flex justify-content-between"},v={class:"p-0 m-0 text-truncate"},w={class:"fw-light ms-1"},y={class:"d-flex justify-content-between"},M=["innerHTML"],k={key:0,class:"ms-1 bg-light shadow-sm rounded-circle notification"};function C(e,t,s,c,a,r){return Object(n["s"])(),Object(n["g"])("div",b,[Object(n["h"])("header",h,[Object(n["h"])("div",j,[Object(n["h"])("button",{class:"input-group-text rounded-0 material-icons",translate:"no",onClick:t[0]||(t[0]=t=>e.$emit("clickConfigButton"))},"menu"),Object(n["h"])("input",{type:"text",class:"form-control",placeholder:"Buscar",onKeyup:t[1]||(t[1]=e=>r.search(e))},null,32),O])]),(Object(n["s"])(!0),Object(n["g"])(n["a"],null,Object(n["w"])(r.friendsList,(t,s)=>{var c;return Object(n["s"])(),Object(n["g"])("div",{key:s,class:"row align-items-center ps-2 m-0 card-friend",onClick:s=>e.setCurrentChat(t)},[Object(n["h"])("img",{src:t.image},null,8,p),Object(n["h"])("div",g,[Object(n["h"])("div",f,[Object(n["h"])("p",v,Object(n["B"])(t.name),1),Object(n["h"])("small",w,Object(n["B"])(null===(c=t.messages.at(-1))||void 0===c?void 0:c.hour),1)]),Object(n["h"])("div",y,[Object(n["h"])("small",{class:"fw-lighter text-truncate p-0 m-0 d-flex",innerHTML:r.lastMessage(t.messages)},null,8,M),t.unreadMessage>0?(Object(n["s"])(),Object(n["g"])("small",k,Object(n["B"])(t.unreadMessage),1)):Object(n["f"])("",!0)])])],8,m)}),128))])}var x=s("5502"),B={data:()=>({searchResult:null}),methods:{...Object(x["c"])(["setCurrentChat"]),...Object(x["d"])(["helpers"]),lastMessage(e){if(!e.at(-1))return;const t=e.at(-1);return this.helpers().notificationByFormat(t.format,t.value)},search(e){const t=e.target.value,s=new RegExp(t.toLowerCase(),"i"),n=[],c=Object.keys(this.users);c.forEach(e=>{s.test(this.users[e].name.toLowerCase())&&n.push(this.users[e])}),this.searchResult=n}},computed:{...Object(x["d"])(["users"]),friendsList(){return this.searchResult?this.searchResult:this.users}}},E=s("6b0d"),L=s.n(E);const T=L()(B,[["render",C]]);var U=T;const $={class:"row align-items-center border-bottom chat-header"},F=["src"],H={class:"col-8"},R={class:"p-0 m-0"};function N(e,t,s,c,a,r){var i,o;return Object(n["s"])(),Object(n["g"])("div",$,[e.currentChat?(Object(n["s"])(),Object(n["g"])("img",{key:0,src:null===(i=e.currentChat)||void 0===i?void 0:i.image},null,8,F)):Object(n["f"])("",!0),Object(n["h"])("div",H,[Object(n["h"])("p",R,Object(n["B"])(null===(o=e.currentChat)||void 0===o?void 0:o.name),1)]),Object(n["x"])(e.$slots,"showListUsers")])}var S={computed:{...Object(x["d"])(["currentChat"])}};const _=L()(S,[["render",N]]);var D=_;const G={class:"row chat-body"},z={key:0,class:"list-message"},P=["onClick"],V=["innerHTML"],q={class:"text-end fw-lighter m-0 p-0 message-hour"},I={class:"d-flex justify-content-center p-4 pt-0"},K={class:"preview w-100 p-3"},J=["value","disabled"],X=["innerHTML"],A={class:"d-flex justify-content-end gap-1 mt-2"};function Q(e,t,s,c,a,r){const i=Object(n["y"])("modal"),o=Object(n["z"])("scrollTo");return Object(n["s"])(),Object(n["g"])("div",G,[e.currentChat?Object(n["H"])((Object(n["s"])(),Object(n["g"])("ul",z,[(Object(n["s"])(!0),Object(n["g"])(n["a"],null,Object(n["w"])(e.currentChat.messages,(e,t)=>(Object(n["s"])(),Object(n["g"])("li",{class:"mb-last-child-off",key:t},[Object(n["h"])("div",{class:Object(n["o"])(["message-container gap-1",{"justify-content-end":r.sending(e.from)}])},[Object(n["h"])("div",{class:Object(n["o"])(["d-flex gap-1 message-body text-wrap text-break lh-sm",{from:r.sending(e.from)}]),onClick:t=>r.setCurrentMessage(e)},[Object(n["h"])("div",{innerHTML:e.value},null,8,V),Object(n["h"])("div",q,Object(n["B"])(e.hour),1)],10,P)],2)]))),128))])),[[o]]):Object(n["f"])("",!0),Object(n["i"])(i,{open:r.openModalMessage,onClose:t[3]||(t[3]=e=>r.closeModalMessage())},{body:Object(n["G"])(()=>{var s;return[Object(n["h"])("div",I,[Object(n["h"])("div",K,["text"==e.currentMessage.format?(Object(n["s"])(),Object(n["g"])("textarea",{key:0,class:"form-control",value:e.currentMessage.value,ref:"inputEditMessage",onKeypress:t[0]||(t[0]=t=>r.editPressEnter(t,e.currentMessage)),disabled:!r.sending(e.currentMessage.from)},"                    \n                            ",40,J)):(Object(n["s"])(),Object(n["g"])("div",{key:1,innerHTML:null===(s=e.currentMessage)||void 0===s?void 0:s.value},null,8,X)),Object(n["h"])("div",A,["text"===e.currentMessage.format&&r.sending(e.currentMessage.from)?(Object(n["s"])(),Object(n["g"])("button",{key:0,class:"btn btn-outline-warning material-icons",translate:"no",onClick:t[1]||(t[1]=t=>r.edit(e.currentMessage))}," edit ")):Object(n["f"])("",!0),Object(n["h"])("button",{class:"btn btn-outline-danger material-icons",translate:"no",onClick:t[2]||(t[2]=t=>{e.deleteMessage({from:e.currentMessage.from,messageId:e.currentMessage.id}),r.closeModalMessage()})}," delete ")])])])]}),_:1},8,["open"])])}const W={class:"absolute-background"},Y={class:"bg-light rounded col-10 col-lg-6"},Z=Object(n["h"])("span",{class:"material-icons pointer"},"close",-1),ee=[Z];function te(e,t,s,c,a,r){return Object(n["s"])(),Object(n["e"])(n["b"],{name:"fade"},{default:Object(n["G"])(()=>[Object(n["H"])(Object(n["h"])("div",W,[Object(n["h"])("div",Y,[Object(n["h"])("div",{class:"w-100 d-flex justify-content-end p-1 pb-0",onClick:t[0]||(t[0]=e=>this.$emit("close"))},ee),Object(n["x"])(e.$slots,"body")])],512),[[n["E"],s.open]])]),_:3})}var se={props:{open:{required:!0,type:Boolean}}};const ne=L()(se,[["render",te]]);var ce=ne,ae={components:{Modal:ce},data:()=>({currentMessage:{}}),computed:{...Object(x["d"])(["currentChat","id"]),openModalMessage(){return!!this.currentMessage.status}},methods:{...Object(x["d"])(["helpers"]),...Object(x["b"])(["editMessage","deleteMessage"]),sending(e){return e===this.id},editPressEnter(e,t){this.$store.state.sendByEnter&&"Enter"===e.key&&(this.edit(t),e.preventDefault())},edit(e){const t=this.$refs.inputEditMessage.value,s=e.id;if(!this.sending(e.from))return this.$refs.inputEditMessage.value=e.value,!1;t&&s&&this.currentMessage.status&&this.editMessage({id:s,value:t}),this.closeModalMessage()},setCurrentMessage(e){var t;(null===(t=this.currentMessage)||void 0===t?void 0:t.id)!==e.id?(this.currentMessage=e,this.currentMessage.status=!0):this.currentMessage={}},closeModalMessage(){this.currentMessage.status=!1}}};const re=L()(ae,[["render",Q]]);var ie=re;const oe={class:"form-floating w-100"},le={class:"h-100 p-3 form-control border-end-0 rounded-0 rounded-start hidden",id:"floatingTextarea",ref:"message"},de={class:"btn border bg-white d-flex align-items-center rounded-0 border-start-0 border-end-0"},ue=Object(n["h"])("label",{for:"inputFile",class:"material-icons fs-1 pointer",translate:"no"},"attach_file",-1),be=Object(n["h"])("span",{class:"material-icons fs-1",translate:"no"},"send",-1),he=[be],je={class:"btn btn-outline-dark d-flex"},Oe=Object(n["h"])("span",{class:"material-icons",translate:"no"},"send",-1),me=[Oe];function pe(e,t,s,c,a,r){const i=Object(n["y"])("input-component"),o=Object(n["y"])("preview");return Object(n["s"])(),Object(n["g"])("div",{class:"d-flex justify-content-center chat-footer",onKeypress:t[6]||(t[6]=e=>r.sendMessageByEnter(e))},[Object(n["h"])("div",oe,[Object(n["h"])("textarea",le,"\n            ",512)]),Object(n["h"])("div",de,[ue,Object(n["i"])(i,{class:"d-none",id:"inputFile",type:"file",accept:"image/*, audio/*, video/*",onValue:t[0]||(t[0]=e=>r.selectFile(e)),onError:t[1]||(t[1]=t=>e.error.file=t)})]),Object(n["h"])("button",{class:"btn border bg-white d-flex align-items-center rounded-0 border-start-0 rounded-end",onClick:t[2]||(t[2]=(...e)=>r.sendText&&r.sendText(...e)),id:"btnSend"},he),Object(n["i"])(o,{preview:e.preview,onClose:t[5]||(t[5]=t=>e.preview.status=!1)},{footer:Object(n["G"])(()=>[Object(n["h"])("button",je,[Object(n["h"])("span",{class:"material-icons",translate:"no",onClick:t[3]||(t[3]=t=>e.preview.status=!1)},"close")]),Object(n["h"])("button",{class:"btn btn-outline-dark d-flex",onClick:t[4]||(t[4]=(...e)=>r.sendFile&&r.sendFile(...e))},me)]),_:1},8,["preview"])],32)}const ge={class:"preview p-3 pt-1"},fe=["innerHTML"],ve={class:"mt-1 ms-1"},we={class:"d-flex justify-content-end gap-2"};function ye(e,t,s,c,a,r){const i=Object(n["y"])("modal");return Object(n["s"])(),Object(n["e"])(i,{open:s.preview.status||!1,onClose:t[0]||(t[0]=e=>this.$emit("close"))},{body:Object(n["G"])(()=>{var t;return[Object(n["h"])("div",ge,[Object(n["h"])("div",{innerHTML:e.helpers().renderByFormat(s.preview.format,s.preview.url)},null,8,fe),Object(n["h"])("p",ve,Object(n["B"])(null===(t=s.preview)||void 0===t?void 0:t.name),1),Object(n["h"])("div",we,[Object(n["x"])(e.$slots,"footer")])])]}),_:3},8,["open"])}var Me={components:{Modal:ce},props:{preview:{required:!0,type:Object}},methods:{...Object(x["d"])(["helpers"])}};const ke=L()(Me,[["render",ye]]);var Ce=ke,xe={components:{Preview:Ce},data:()=>({preview:{},error:{}}),methods:{...Object(x["b"])(["sendMessage"]),selectFile(e){this.preview.status=!0,this.preview.name=e.name,this.preview.value=e,this.preview.url=window.URL.createObjectURL(e),this.preview.format=e.type.split("/")[0]},sendFile(){this.sendMessage({format:this.preview.format,value:this.preview.value,objectUrl:this.preview.url}),this.preview.status=!1},sendText(){if(!this.$refs.message.value)return!1;this.sendMessage({value:this.$refs.message.value}),this.$refs.message.value=""},sendMessageByEnter(e){this.$store.state.sendByEnter&&"Enter"===e.key&&(this.sendText(),e.preventDefault())}}};const Be=L()(xe,[["render",pe]]);var Ee=Be;const Le={class:"absolute-background justify-content-start col-md-12"},Te={class:"friends d-lg-block col-3 border-end p-0 w-mobile-100"},Ue={class:"row align-items-center justify-content-end m-0 card-friend"},$e={class:"p-4"},Fe={class:"mb-3"},He=["src"],Re={class:"mb-3"},Ne=Object(n["h"])("label",{class:"form-label",for:"profilePicture"},"Escolha uma foto:",-1),Se={class:"input-group"},_e={key:0,class:"text-danger",role:"alert"},De={class:"input-group mb-3"},Ge={class:"form-check form-switch mb-3"},ze=Object(n["h"])("label",{class:"form-check-label ms-2",for:"sendByEnter"},"Enviar com Enter",-1),Pe={class:"form-check form-switch"},Ve=Object(n["h"])("label",{class:"form-check-label ms-2",for:"showNotification"},"Exibir notificações",-1);function qe(e,t,s,c,a,r){const i=Object(n["y"])("input-component");return Object(n["s"])(),Object(n["e"])(n["b"],{name:"fade"},{default:Object(n["G"])(()=>[Object(n["H"])(Object(n["h"])("section",Le,[Object(n["h"])("aside",Te,[Object(n["h"])("header",Ue,[Object(n["h"])("span",{class:"material-icons w-auto float-right",translate:"no",onClick:t[0]||(t[0]=t=>{e.$emit("close"),r.closeSettings()})}," close ")]),Object(n["h"])("section",$e,[Object(n["h"])("div",Fe,[Object(n["h"])("img",{class:"border border-dark rounded mx-auto d-block img-size",src:r.profile,alt:"profilePicture"},null,8,He)]),Object(n["h"])("div",Re,[Ne,Object(n["h"])("div",Se,[Object(n["i"])(i,{self:!0,id:"profilePicture",type:"file",class:"form-control",accept:"image/*",onSelf:t[1]||(t[1]=t=>e.inputFile=t),onValue:t[2]||(t[2]=t=>e.file=t),onError:t[3]||(t[3]=t=>e.fileError=!0)}),Object(n["h"])("button",{class:"input-group-text btn-warning material-icons",onClick:t[4]||(t[4]=(...e)=>r.updateImage&&r.updateImage(...e))}," edit ")]),Object(n["i"])(n["b"],{name:"fade"},{default:Object(n["G"])(()=>[e.fileError?(Object(n["s"])(),Object(n["g"])("small",_e," A imagem deve ter no máximo 10mb! ")):Object(n["f"])("",!0)]),_:1})]),Object(n["h"])("div",De,[Object(n["i"])(i,{id:"updateName",class:"form-control",type:"text",value:e.$store.state.name,maxLength:50,minLength:2,on:"blur",onValue:t[5]||(t[5]=t=>e.name=t),onBlur:t[6]||(t[6]=e=>r.setDefaultName(e))},null,8,["value"]),Object(n["h"])("button",{class:"input-group-text btn-warning material-icons",onClick:t[7]||(t[7]=(...e)=>r.updateName&&r.updateName(...e))}," edit ")]),Object(n["h"])("div",Ge,[Object(n["H"])(Object(n["h"])("input",{class:"form-check-input px-4 py-2",type:"checkbox",id:"sendByEnter","onUpdate:modelValue":t[8]||(t[8]=t=>e.$store.state.sendByEnter=t)},null,512),[[n["D"],e.$store.state.sendByEnter]]),ze]),Object(n["h"])("div",Pe,[Object(n["H"])(Object(n["h"])("input",{class:"form-check-input px-4 py-2",type:"checkbox",id:"showNotification","onUpdate:modelValue":t[9]||(t[9]=t=>e.$store.state.showNotification=t)},null,512),[[n["D"],e.$store.state.showNotification]]),Ve])])])],512),[[n["E"],s.open]])]),_:1})}var Ie={props:{open:{required:!0,type:Boolean}},data:()=>({inputFile:null,file:null,urlBlob:null,name:null,fileError:!1}),computed:{profile(){return this.file?this.fileToUrlBlob(this.file):this.$store.state.image}},methods:{...Object(x["b"])(["updateDataUser"]),...Object(x["d"])(["iziToast"]),updateImage(){this.file&&(this.updateDataUser({field:"image",value:this.file,objectUrl:this.urlBlob}),this.iziToast().success({message:"Foto de perfil atualizada com sucesso!"}),this.file=null)},updateName(){this.name&&(this.updateDataUser({field:"name",value:this.name}),this.iziToast().success({message:"Nome de usuário atualizado com sucesso!"}),this.name=null)},setDefaultName(e){e.target.value||(e.target.value=this.$store.state.name)},fileToUrlBlob(e){return this.urlBlob&&window.URL.revokeObjectURL(this.urlBlob),this.urlBlob=window.URL.createObjectURL(e),this.urlBlob},closeSettings(){this.urlBlob&&window.URL.revokeObjectURL(this.urlBlob),this.name=null,this.file=null,this.inputFile.value=null}}};const Ke=L()(Ie,[["render",qe]]);var Je=Ke;const Xe=Object(n["h"])("div",{class:"row align-items-center p-4 m-0 card-friend"},[Object(n["h"])("h1",null,":("),Object(n["h"])("h2",null,"Poxa, parece que não tem ninguém online"),Object(n["h"])("h3",{class:"fw-light"},"Que tal chamar alguns amigos???")],-1);function Ae(e,t,s,c,a,r){const i=Object(n["y"])("modal");return Object(n["s"])(),Object(n["e"])(i,{open:r.openModal,onClose:t[0]||(t[0]=t=>e.close=!0)},{body:Object(n["G"])(()=>[Xe]),_:1},8,["open"])}var Qe={components:{Modal:ce},data:()=>({close:!1}),computed:{...Object(x["d"])(["amountUsers"]),openModal(){return this.amountUsers<1&&!this.close}}};const We=L()(Qe,[["render",Ae]]);var Ye=We,Ze={components:{ChatHeader:D,ChatBody:ie,ChatFooter:Ee,FriendsList:U,Settings:Je,NoUsersOnline:Ye},data:()=>({openSettings:!1,touchstart:""}),computed:{...Object(x["d"])(["currentChat"])},methods:{...Object(x["c"])(["resetCurrentChat"]),showMobileSideBar(e){const t=this.touchstart.changedTouches[0].clientX,s=e.changedTouches[0].clientX;t<s&&this.resetCurrentChat()}}};const et=L()(Ze,[["render",u]]);t["default"]=et}}]);
//# sourceMappingURL=chunk-2d226c80.ecee282c.js.map